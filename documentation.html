
	<html>
		<head>
			<title>Event Store Stream Documentation</title>
			<style>
				.module-header, .module-description {
					background-color: #EFEFEF;
				}

				.function-description {
					background-color: #DDD;
				}

				.module-header {
					border: 1px solid;
					border-radius: 5px;
					padding: 10px;
					margin: 10px 0 10px 0;
				}
				.module-name {
					font-weight: bold;
				}
				.module-description .module-name {
					font-size: 120%;
				}
				ul.module-functions {
					list-style: none;
				}
				.module-description {
					border: 1px solid;
					border-radius: 5px;
					padding: 10px;
					margin: 10px 0 10px 0;
				}
				.module-name, .module-author,
				.module-date {
					margin: 2px 0 2px 0;
				}
				.module-desc {
					margin: 10px 0 10px 20px;
				}

				.function-description {
					backgound-color: #EFEFEF;
					border: 1px dotted;
					border-radius: 5px;
					padding: 10px;
					margin: 5px 0 5px 0;
				}

				.function-desc {
					margin: 5px 0 5px 20px;
				}

				a:visited {
					color: #00F
				}

				a {
					text-decoration: none;
					border-bottom: 1px solid transparent;
					transition: all ease-in-out 0.5s;
				}

				a:hover {
					text-decoration: none;
					border-color: #00F;
				}

				.top-scroll {
					position: fixed;
					bottom: 0;
					right: 10px;
					font-weight: bold;
					font-size: 180%;
					border: 1px solid;
					border-radius: 5px;
					padding: 10px 20px;
					background-color: #EFEFEF;
					opacity: 0.8;
					cursor: pointer;
				}
			</style>
			<script type="text/javascript">
				window.onload = function() {
					var links = document.querySelectorAll('a');
					links.forEach(link => link.addEventListener('click', function(e) {
						e.preventDefault();
						var elm = this.href.substring(this.href.indexOf('#') + 1);
						scrollToItemId(elm, 2);
					}));

					document.querySelector('.top-scroll').addEventListener('click', function() {
						scrollToItemId('top', 2);
					});

					window.onscroll();
				}

				window.onscroll = function() {
					document.querySelector('.top-scroll').style.visibility = 
						document.body.scrollTop > 100 ? 'visible' : 'hidden';
				}

				function scrollToItemId(scrollToId, scrollTime) {
					scrollTime *= 1000;
			        var item = document.getElementById(scrollToId);

			        var from = document.body.scrollTop;
			        var to = item.offsetTop;

			        var startTime = Date.now();

				    function ease(k) {
				    	return 0.5 * (1 - Math.cos(Math.PI * k));
				    }

			        (function scroll() {
			        	var elapsed = (Date.now() - startTime) / scrollTime;
			        	if (elapsed > 1)
			        		elapsed = 1;
			        	var change = ease(elapsed);
			        	var currentPos = from + (to - from) * change;

			            document.body.scrollTop = currentPos;
			            if (currentPos !== to) {
			                requestAnimationFrame(scroll);
			            }
			            else {
			            	window.location.hash = '#' + scrollToId;
			            }
			        })();
			    }
			</script>
		</head>
		<body>
			<div class="project-header" id="top">
			<h1>Event Store Stream Documentation</h1>
			</div>
			<div class="project-synopsis">
			<h2>Module List</h2>
			
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.StreamConnection">event-store-stream.StreamConnection</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.createStream">
					<b>createStream</b>
				</a> <b>::</b> (Observer &#8594; Promise Subscription Error) &#8594; Observable Event Error
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.stream$">
					<b>stream$</b>
				</a> <b>::</b> StreamConnection &#8594; string &#8594; bool &#8594; UserCredentials &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.streamFrom$">
					<b>streamFrom$</b>
				</a> <b>::</b> StreamConnection &#8594; string &#8594; int &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.all$">
					<b>all$</b>
				</a> <b>::</b> StreamConnection &#8594; bool &#8594; UserCredentials &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.allFrom$">
					<b>allFrom$</b>
				</a> <b>::</b> StreamConnection &#8594; Position &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.Denormalizer">event-store-stream.Denormalizer</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.new">
					<b>new</b>
				</a> <b>::</b> DBHManager &#8594; StreamConnection &#8594; int &#8594; int &#8594; IBus &#8594; Denormalizer
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.map">
					<b>map</b>
				</a> <b>::</b> Denormalizer &#8594; string &#8594; (Event &#8594; Transaction ())
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.start">
					<b>start</b>
				</a> <b>::</b> Denormalizer &#8594; () &#8594; ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.run">
					<b>run</b>
				</a> <b>::</b> Denormalizer &#8594; Observable Event &#8594; ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.interested">
					<b>interested</b>
				</a> <b>::</b> [string] &#8594; Event &#8594; bool
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream">event-store-stream</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.func.createStreamConnection">
					<b>createStreamConnection</b>
				</a> <b>::</b> Object &#8594; string &#8594; StreamConnection
			</li>
		
			</ul>
		</div>
	
			</div>
			<div class="project-description">
			<h2>Module Description</h2>
			
		<div class="module-description" id="doc.module.event-store-stream.StreamConnection">
			<div class="module-name">
				Module: event-store-stream.StreamConnection
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/19/2017
			</div>
			<div class="module-desc">
			Adds methods to the event store connection
to create RxJS Observable streams for stream
subscriptions.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.createStream">
				<div class="function-name">
					<b>createStream</b> <b>::</b> (Observer &#8594; Promise Subscription Error) &#8594; Observable Event Error
				</div>
				<div class="function-desc">
					
Create an RxJS Observable stream from subscription. This handles disposal of
the subscription on Observable disposal and errors with subscription.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.stream$">
				<div class="function-name">
					<b>stream$</b> <b>::</b> StreamConnection &#8594; string &#8594; bool &#8594; UserCredentials &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of the requested event stream.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.streamFrom$">
				<div class="function-name">
					<b>streamFrom$</b> <b>::</b> StreamConnection &#8594; string &#8594; int &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of the requested event stream. This stream starts at
the desired position, loads all events from there up in batchSize increments,
and then finally subscribes to the live stream once all old events are processed.<br><br>If the final parameter is true, then the resulting Observable will complete after catching up
to the latest event. This can be used with an initial aggregate and reduce to apply events to an
aggregate.<br><br>If the final parameter is false, then the subscription is kept open and the Observable will receive
live events.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.all$">
				<div class="function-name">
					<b>all$</b> <b>::</b> StreamConnection &#8594; bool &#8594; UserCredentials &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of all event streams.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.allFrom$">
				<div class="function-name">
					<b>allFrom$</b> <b>::</b> StreamConnection &#8594; Position &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of all event streams. This stream starts at
the desired position, loads all events from there up in batchSize increments,
and then finally subscribes to the live stream once all old events are processed.<br><br>If the final parameter is true, then the resulting Observable will complete after catching up
to the latest event. This can be used with an initial aggregate and reduce to apply events to an
aggregate.<br><br>If the final parameter is false, then the subscription is kept open and the Observable will receive
live events.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.Denormalizer">
			<div class="module-name">
				Module: event-store-stream.Denormalizer
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/20/2017
			</div>
			<div class="module-desc">
			The denormalizer handles running boilerplate
queries and loading event store events, so the
user code only needs to worry about mapping from
events to queries.<br><br>To use the denormalizer, you must ensure that your schema
includes a table called "history" with a single column called
"checkpoint" of type int. This is used to pick the first event
to retrieve from the event store on a cold start, and it is updated
every time a batch of events is processed, transactionally with
the updates.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.new">
				<div class="function-name">
					<b>new</b> <b>::</b> DBHManager &#8594; StreamConnection &#8594; int &#8594; int &#8594; IBus &#8594; Denormalizer
				</div>
				<div class="function-desc">
					
Creates a new denormalizer. Queries are ran on dbm, events
are loaded from es. If an optional event bus is supplied, then
events emitted by mappers will be published to it.<br><br>Events are loaded batchSize events at a time.<br><br>Events are buffered by the provided throttle time (milliseconds)
and processed together in the window they occur in.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.map">
				<div class="function-name">
					<b>map</b> <b>::</b> Denormalizer &#8594; string &#8594; (Event &#8594; Transaction ())
				</div>
				<div class="function-desc">
					
Register a function that maps events of a specific type
to queries on the database.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.start">
				<div class="function-name">
					<b>start</b> <b>::</b> Denormalizer &#8594; () &#8594; ()
				</div>
				<div class="function-desc">
					
Start the denormalizer.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.run">
				<div class="function-name">
					<b>run</b> <b>::</b> Denormalizer &#8594; Observable Event &#8594; ()
				</div>
				<div class="function-desc">
					
Processes events through the mappers and then
runs a transaction for each batch of events on
the database to update it.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.interested">
				<div class="function-name">
					<b>interested</b> <b>::</b> [string] &#8594; Event &#8594; bool
				</div>
				<div class="function-desc">
					
Creates a filter predicate for the specified event types
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream">
			<div class="module-name">
				Module: event-store-stream
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/19/2017
			</div>
			<div class="module-desc">
			Wraps the node-eventstore-client to
provide RxJS Observables (event streams)
of subscriptions, in addition to having
a callback based version.<br><br>The methods from the node-eventstore-client
connection are dispatched to automatically,
so this can be used in place of it directly.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.func.createStreamConnection">
				<div class="function-name">
					<b>createStreamConnection</b> <b>::</b> Object &#8594; string &#8594; StreamConnection
				</div>
				<div class="function-desc">
					
Creates a connection to the event store that supports creating
RxJS Observable streams of subscriptions.
				</div>
			</div>
		
			</div>
		</div>
	
			</div>

			<div class="top-scroll">
					<a href="#top">&#8593;</a>
			</div>

			<div class="footer">
			This documentation was generated by <code>hmdoc</code> on <code>6/21/2017, 4:38:21 PM</code>
			</div>
		</body>
	</html>
	
