
	<html>
		<head>
			<title>Event Store Stream Documentation</title>
			<style>
				.module-header, .module-description {
					background-color: #EFEFEF;
				}

				.function-description {
					background-color: #DDD;
				}

				.module-header {
					border: 1px solid;
					border-radius: 5px;
					padding: 10px;
					margin: 10px 0 10px 0;
				}
				.module-name {
					font-weight: bold;
				}
				.module-description .module-name {
					font-size: 120%;
				}
				ul.module-functions {
					list-style: none;
				}
				.module-description {
					border: 1px solid;
					border-radius: 5px;
					padding: 10px;
					margin: 10px 0 10px 0;
				}
				.module-name, .module-author,
				.module-date {
					margin: 2px 0 2px 0;
				}
				.module-desc {
					margin: 10px 0 10px 20px;
				}

				.function-description {
					backgound-color: #EFEFEF;
					border: 1px dotted;
					border-radius: 5px;
					padding: 10px;
					margin: 5px 0 5px 0;
				}

				.function-desc {
					margin: 5px 0 5px 20px;
				}

				a:visited {
					color: #00F
				}

				a {
					text-decoration: none;
					border-bottom: 1px solid transparent;
					transition: all ease-in-out 0.5s;
				}

				a:hover {
					text-decoration: none;
					border-color: #00F;
				}

				.top-scroll {
					position: fixed;
					bottom: 0;
					right: 10px;
					font-weight: bold;
					font-size: 180%;
					border: 1px solid;
					border-radius: 5px;
					padding: 10px 20px;
					background-color: #EFEFEF;
					opacity: 0.8;
					cursor: pointer;
				}
			</style>
			<script type="text/javascript">
				window.onload = function() {
					var links = document.querySelectorAll('a');
					links.forEach(link => link.addEventListener('click', function(e) {
						e.preventDefault();
						var elm = this.href.substring(this.href.indexOf('#') + 1);
						scrollToItemId(elm, 2);
					}));

					document.querySelector('.top-scroll').addEventListener('click', function() {
						scrollToItemId('top', 2);
					});

					window.onscroll();
				}

				window.onscroll = function() {
					document.querySelector('.top-scroll').style.visibility = 
						document.body.scrollTop > 100 ? 'visible' : 'hidden';
				}

				function scrollToItemId(scrollToId, scrollTime) {
					scrollTime *= 1000;
			        var item = document.getElementById(scrollToId);

			        var from = document.body.scrollTop;
			        var to = item.offsetTop;

			        var startTime = Date.now();

				    function ease(k) {
				    	return 0.5 * (1 - Math.cos(Math.PI * k));
				    }

			        (function scroll() {
			        	var elapsed = (Date.now() - startTime) / scrollTime;
			        	if (elapsed > 1)
			        		elapsed = 1;
			        	var change = ease(elapsed);
			        	var currentPos = from + (to - from) * change;

			            document.body.scrollTop = currentPos;
			            if (currentPos !== to) {
			                requestAnimationFrame(scroll);
			            }
			            else {
			            	window.location.hash = '#' + scrollToId;
			            }
			        })();
			    }
			</script>
		</head>
		<body>
			<div class="project-header" id="top">
			<h1>Event Store Stream Documentation</h1>
			</div>
			<div class="project-synopsis">
			<h2>Module List</h2>
			
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.StreamConnection">event-store-stream.StreamConnection</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.createStream">
					<b>createStream</b>
				</a> <b>::</b> (Observer &#8594; Promise Subscription Error) &#8594; Observable Event Error
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.stream$">
					<b>stream$</b>
				</a> <b>::</b> StreamConnection &#8594; string &#8594; bool &#8594; UserCredentials &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.streamFrom$">
					<b>streamFrom$</b>
				</a> <b>::</b> StreamConnection &#8594; string &#8594; int &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.all$">
					<b>all$</b>
				</a> <b>::</b> StreamConnection &#8594; bool &#8594; UserCredentials &#8594; Observable Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.StreamConnection.func.allFrom$">
					<b>allFrom$</b>
				</a> <b>::</b> StreamConnection &#8594; Position &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.Denormalizer">event-store-stream.Denormalizer</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.new">
					<b>new</b>
				</a> <b>::</b> DBHManager &#8594; StreamConnection &#8594; int &#8594; int &#8594; IBus &#8594; Denormalizer
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.map">
					<b>map</b>
				</a> <b>::</b> Denormalizer &#8594; string &#8594; (Event &#8594; Transaction ())
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.start">
					<b>start</b>
				</a> <b>::</b> Denormalizer &#8594; () &#8594; ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.run">
					<b>run</b>
				</a> <b>::</b> Denormalizer &#8594; Observable Event &#8594; ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.Denormalizer.func.interested">
					<b>interested</b>
				</a> <b>::</b> [string] &#8594; Event &#8594; bool
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream">event-store-stream</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.func.createStreamConnection">
					<b>createStreamConnection</b>
				</a> <b>::</b> Object &#8594; string &#8594; StreamConnection
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.util">event-store-stream.util</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.util.func.simplifyEvent">
					<b>simplifyEvent</b>
				</a> <b>::</b> ResolvedEvent &#8594; Event
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.new :: UUID -> int -> Object -> DomainObject">new :: UUID -> int -> Object -> DomainObject</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func.create">
					<b>create</b>
				</a> <b>::</b> ...any &#8594; EventStoreDSL Error DomainObject
			</li>
		
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func.load">
					<b>load</b>
				</a> <b>::</b> UUID &#8594; EventStoreDSL Error DomainObject
			</li>
		
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func.addEvent">
					<b>addEvent</b>
				</a> <b>::</b> DomainObject &#8594; Event &#8594; bool &#8594; EventStoreDSL Error DomainObject
			</li>
		
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func._applyEvent">
					<b>_applyEvent</b>
				</a> <b>::</b> DomainObject &#8594; DomainEvent &#8594; int &#8594; DomainObject
			</li>
		
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func.applyEvent">
					<b>applyEvent</b>
				</a> <b>::</b> DomainObject &#8594; DomainEvent &#8594; Object
			</li>
		
			<li>
				<a href="#doc.module.new :: UUID -> int -> Object -> DomainObject.func.snapshot">
					<b>snapshot</b>
				</a> <b>::</b> DomainObject &#8594; () &#8594; EventStoreDSL Error DomainObject
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.Domain.Event">event-store-stream.Domain.Event</a>
			</div>
			<ul class="module-functions">
				
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL">event-store-stream.EventStoreESL</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.readFromStream">
					<b>readFromStream</b>
				</a> <b>::</b> string &#8594; int &#8594; EventStoreESL (StreamDeletedError | AccessDeniedError) (Observable Event ())
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.appendToStream">
					<b>appendToStream</b>
				</a> <b>::</b> string &#8594; [EventData] | EventData &#8594; int &#8594; EventStoreESL EventStoreError ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.commitStream">
					<b>commitStream</b>
				</a> <b>::</b> string &#8594; EventStoreESL EventStoreError ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.readEvents">
					<b>readEvents</b>
				</a> <b>::</b> string &#8594; int &#8594; int &#8594; 'forward' | 'backward' &#8594; EventStoreESL EventStoreError [Event]
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.readEvent">
					<b>readEvent</b>
				</a> <b>::</b> string &#8594; int &#8594; EventStoreESL EventStoreError Event
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.func.unit">
					<b>unit</b>
				</a> <b>::</b> a &#8594; EventESL () a
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL.Interpreter">event-store-stream.EventStoreESL.Interpreter</a>
			</div>
			<ul class="module-functions">
				
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.new">
					<b>new</b>
				</a> <b>::</b> StreamConnection &#8594; UserCredentials &#8594; int &#8594; (Free f a &#8594; Async a) &#8594; Interpreter
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.prepare">
					<b>prepare</b>
				</a> <b>::</b> Interpreter &#8594; () &#8594; Async () ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.map">
					<b>map</b>
				</a> <b>::</b> Interpeter &#8594; EventStoreESL e a &#8594; (Async e a, (a &#8594; Free f b) | Free f b)
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.cleanup">
					<b>cleanup</b>
				</a> <b>::</b> Interpreter &#8594; a &#8594; Async e a
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.">
					<b></b>
				</a> <b>::</b> leanupErr : Interpreter &#8594; e &#8594; Async e ()
			</li>
		
			<li>
				<a href="#doc.module.event-store-stream.EventStoreESL.Interpreter.func.interpreter">
					<b>interpreter</b>
				</a> <b>::</b> StreamConnection &#8594; UserCredentials &#8594; int &#8594; (Free f a &#8594; Async a) &#8594; Interpreter
			</li>
		
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL.Functor.AppendToStream">event-store-stream.EventStoreESL.Functor.AppendToStream</a>
			</div>
			<ul class="module-functions">
				
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL.Functor.CommitStream">event-store-stream.EventStoreESL.Functor.CommitStream</a>
			</div>
			<ul class="module-functions">
				
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL.Functor.ReadEvents">event-store-stream.EventStoreESL.Functor.ReadEvents</a>
			</div>
			<ul class="module-functions">
				
			</ul>
		</div>
	
		<div class="module-header">
			<div class="module-name">
			Module: <a href="#doc.module.event-store-stream.EventStoreESL.Functor.ReadFromStream">event-store-stream.EventStoreESL.Functor.ReadFromStream</a>
			</div>
			<ul class="module-functions">
				
			</ul>
		</div>
	
			</div>
			<div class="project-description">
			<h2>Module Description</h2>
			
		<div class="module-description" id="doc.module.event-store-stream.StreamConnection">
			<div class="module-name">
				Module: event-store-stream.StreamConnection
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/19/2017
			</div>
			<div class="module-desc">
			Adds methods to the event store connection
to create RxJS Observable streams for stream
subscriptions.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.createStream">
				<div class="function-name">
					<b>createStream</b> <b>::</b> (Observer &#8594; Promise Subscription Error) &#8594; Observable Event Error
				</div>
				<div class="function-desc">
					
Create an RxJS Observable stream from subscription. This handles disposal of
the subscription on Observable disposal and errors with subscription.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.stream$">
				<div class="function-name">
					<b>stream$</b> <b>::</b> StreamConnection &#8594; string &#8594; bool &#8594; UserCredentials &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of the requested event stream.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.streamFrom$">
				<div class="function-name">
					<b>streamFrom$</b> <b>::</b> StreamConnection &#8594; string &#8594; int &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of the requested event stream. This stream starts at
the desired position, loads all events from there up in batchSize increments,
and then finally subscribes to the live stream once all old events are processed.<br><br>If the final parameter is true, then the resulting Observable will complete after catching up
to the latest event. This can be used with an initial aggregate and reduce to apply events to an
aggregate.<br><br>If the final parameter is false, then the subscription is kept open and the Observable will receive
live events.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.all$">
				<div class="function-name">
					<b>all$</b> <b>::</b> StreamConnection &#8594; bool &#8594; UserCredentials &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of all event streams.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.StreamConnection.func.allFrom$">
				<div class="function-name">
					<b>allFrom$</b> <b>::</b> StreamConnection &#8594; Position &#8594; bool &#8594; UserCredentials &#8594; int &#8594; bool &#8594; Observable Event
				</div>
				<div class="function-desc">
					
Returns an Observable of all event streams. This stream starts at
the desired position, loads all events from there up in batchSize increments,
and then finally subscribes to the live stream once all old events are processed.<br><br>If the final parameter is true, then the resulting Observable will complete after catching up
to the latest event. This can be used with an initial aggregate and reduce to apply events to an
aggregate.<br><br>If the final parameter is false, then the subscription is kept open and the Observable will receive
live events.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.Denormalizer">
			<div class="module-name">
				Module: event-store-stream.Denormalizer
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/20/2017
			</div>
			<div class="module-desc">
			The denormalizer handles running boilerplate
queries and loading event store events, so the
user code only needs to worry about mapping from
events to queries.<br><br>To use the denormalizer, you must ensure that your schema
includes a table called "history" with a single column called
"checkpoint" of type int. This is used to pick the first event
to retrieve from the event store on a cold start, and it is updated
every time a batch of events is processed, transactionally with
the updates.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.new">
				<div class="function-name">
					<b>new</b> <b>::</b> DBHManager &#8594; StreamConnection &#8594; int &#8594; int &#8594; IBus &#8594; Denormalizer
				</div>
				<div class="function-desc">
					
Creates a new denormalizer. Queries are ran on dbm, events
are loaded from es. If an optional event bus is supplied, then
events emitted by mappers will be published to it.<br><br>Events are loaded batchSize events at a time.<br><br>Events are buffered by the provided throttle time (milliseconds)
and processed together in the window they occur in.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.map">
				<div class="function-name">
					<b>map</b> <b>::</b> Denormalizer &#8594; string &#8594; (Event &#8594; Transaction ())
				</div>
				<div class="function-desc">
					
Register a function that maps events of a specific type
to queries on the database.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.start">
				<div class="function-name">
					<b>start</b> <b>::</b> Denormalizer &#8594; () &#8594; ()
				</div>
				<div class="function-desc">
					
Start the denormalizer.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.run">
				<div class="function-name">
					<b>run</b> <b>::</b> Denormalizer &#8594; Observable Event &#8594; ()
				</div>
				<div class="function-desc">
					
Processes events through the mappers and then
runs a transaction for each batch of events on
the database to update it.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.Denormalizer.func.interested">
				<div class="function-name">
					<b>interested</b> <b>::</b> [string] &#8594; Event &#8594; bool
				</div>
				<div class="function-desc">
					
Creates a filter predicate for the specified event types
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream">
			<div class="module-name">
				Module: event-store-stream
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/19/2017
			</div>
			<div class="module-desc">
			Wraps the node-eventstore-client to
provide RxJS Observables (event streams)
of subscriptions, in addition to having
a callback based version.<br><br>The methods from the node-eventstore-client
connection are dispatched to automatically,
so this can be used in place of it directly.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.func.createStreamConnection">
				<div class="function-name">
					<b>createStreamConnection</b> <b>::</b> Object &#8594; string &#8594; StreamConnection
				</div>
				<div class="function-desc">
					
Creates a connection to the event store that supports creating
RxJS Observable streams of subscriptions.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.util">
			<div class="module-name">
				Module: event-store-stream.util
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Utility functions used internally.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.util.func.simplifyEvent">
				<div class="function-name">
					<b>simplifyEvent</b> <b>::</b> ResolvedEvent &#8594; Event
				</div>
				<div class="function-desc">
					
Simplifies the event object from the one returned
by the Event Store.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.new :: UUID -> int -> Object -> DomainObject">
			<div class="module-name">
				Module: new :: UUID -> int -> Object -> DomainObject
			</div>
			<div class="module-author">
			<b>Written By:</b> 
			</div>
			<div class="module-date">
			<b>Written On:</b> 
			</div>
			<div class="module-desc">
			
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func.create">
				<div class="function-name">
					<b>create</b> <b>::</b> ...any &#8594; EventStoreDSL Error DomainObject
				</div>
				<div class="function-desc">
					
Creates a new instance of the domain object.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func.load">
				<div class="function-name">
					<b>load</b> <b>::</b> UUID &#8594; EventStoreDSL Error DomainObject
				</div>
				<div class="function-desc">
					
Loads the domain object with the specified id.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func.addEvent">
				<div class="function-name">
					<b>addEvent</b> <b>::</b> DomainObject &#8594; Event &#8594; bool &#8594; EventStoreDSL Error DomainObject
				</div>
				<div class="function-desc">
					
Adds an event to the domain object.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func._applyEvent">
				<div class="function-name">
					<b>_applyEvent</b> <b>::</b> DomainObject &#8594; DomainEvent &#8594; int &#8594; DomainObject
				</div>
				<div class="function-desc">
					
Returns a new instance of this type representing the same domain
object in the state arrived at by applying the provided event.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func.applyEvent">
				<div class="function-name">
					<b>applyEvent</b> <b>::</b> DomainObject &#8594; DomainEvent &#8594; Object
				</div>
				<div class="function-desc">
					
Returns changes to apply to this object in response to
an event.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.new :: UUID -> int -> Object -> DomainObject.func.snapshot">
				<div class="function-name">
					<b>snapshot</b> <b>::</b> DomainObject &#8594; () &#8594; EventStoreDSL Error DomainObject
				</div>
				<div class="function-desc">
					
Takes a snapshot of the current domain object state.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.Domain.Event">
			<div class="module-name">
				Module: event-store-stream.Domain.Event
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Base type for Events.
			</div>
			<div class="module-functions">
				
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			The ESL (Effect Specific Language) for Event
Store allows the creation of composable transactions
on the Event Store.<br><br>An ESL expression automatically handles the creation
of a transaction whenever a stream is first written to and attempts
to commit all open transactions after it finishes running.<br><br>Interpreter behavior:
	When a stream has no transaction open:
		If we read from the stream, the expected version becomes
		the last eventNumber read<br><br>		If we write to a stream, a transaction is opened and the
		stored last eventNumber from reading is used as the expectedVersion<br><br>		If we write to a stream, we can also provide an expectedVersion
		number for the transaction.<br><br>	When a stream has a transaction open:
		Attempting to read from the stream will commit the current transaction.
		See above for how the next transaction is affected<br><br>		Writing will simply write to the underlying transaction. Specifying an
		expected verion will commit the current transaction, then create a new
		one as above
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.readFromStream">
				<div class="function-name">
					<b>readFromStream</b> <b>::</b> string &#8594; int &#8594; EventStoreESL (StreamDeletedError | AccessDeniedError) (Observable Event ())
				</div>
				<div class="function-desc">
					
Gets an Observable sequence of events from the specified stream,
starting at the specified event number in the stream.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.appendToStream">
				<div class="function-name">
					<b>appendToStream</b> <b>::</b> string &#8594; [EventData] | EventData &#8594; int &#8594; EventStoreESL EventStoreError ()
				</div>
				<div class="function-desc">
					
Appends an event (or events) to a stream. This will always take place within
an EventStore transaction.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.commitStream">
				<div class="function-name">
					<b>commitStream</b> <b>::</b> string &#8594; EventStoreESL EventStoreError ()
				</div>
				<div class="function-desc">
					
Commits the transaction for the specified stream.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.readEvents">
				<div class="function-name">
					<b>readEvents</b> <b>::</b> string &#8594; int &#8594; int &#8594; 'forward' | 'backward' &#8594; EventStoreESL EventStoreError [Event]
				</div>
				<div class="function-desc">
					
Reads events from the event stream in the specified direction.<br><br>If reading backwards, then negative starting values can be used, where
-1 is the last event, -2 is the second to last event, and so on.<br><br>Direction is forward if not specified.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.readEvent">
				<div class="function-name">
					<b>readEvent</b> <b>::</b> string &#8594; int &#8594; EventStoreESL EventStoreError Event
				</div>
				<div class="function-desc">
					
Reads a single event from the event stream. Use negative position to
read from end of stream, where -1 is the last event, -2 is the second to last,
and so on.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.func.unit">
				<div class="function-name">
					<b>unit</b> <b>::</b> a &#8594; EventESL () a
				</div>
				<div class="function-desc">
					
Put a value into the ESL context.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL.Interpreter">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL.Interpreter
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			This interpreter maps the EventStoreESL expression to
an Async computation.
			</div>
			<div class="module-functions">
				
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.new">
				<div class="function-name">
					<b>new</b> <b>::</b> StreamConnection &#8594; UserCredentials &#8594; int &#8594; (Free f a &#8594; Async a) &#8594; Interpreter
				</div>
				<div class="function-desc">
					
Constructs a new instance of the interpreter.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.prepare">
				<div class="function-name">
					<b>prepare</b> <b>::</b> Interpreter &#8594; () &#8594; Async () ()
				</div>
				<div class="function-desc">
					
Prepares the interpreter's state to interpret
an EventStoreESL expression.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.map">
				<div class="function-name">
					<b>map</b> <b>::</b> Interpeter &#8594; EventStoreESL e a &#8594; (Async e a, (a &#8594; Free f b) | Free f b)
				</div>
				<div class="function-desc">
					
Maps the provided expression to an Async computation.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.cleanup">
				<div class="function-name">
					<b>cleanup</b> <b>::</b> Interpreter &#8594; a &#8594; Async e a
				</div>
				<div class="function-desc">
					
Cleans up the resources used by the interpreter.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.">
				<div class="function-name">
					<b></b> <b>::</b> leanupErr : Interpreter &#8594; e &#8594; Async e ()
				</div>
				<div class="function-desc">
					
Cleans up the resources used by the interpreter,
when an error during interpretation occurs.
				</div>
			</div>
		
			<div class="function-description"
			id="doc.module.event-store-stream.EventStoreESL.Interpreter.func.interpreter">
				<div class="function-name">
					<b>interpreter</b> <b>::</b> StreamConnection &#8594; UserCredentials &#8594; int &#8594; (Free f a &#8594; Async a) &#8594; Interpreter
				</div>
				<div class="function-desc">
					
Creates an interpreter constructor for the specified
stream connection.
				</div>
			</div>
		
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL.Functor.AppendToStream">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL.Functor.AppendToStream
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Represents a request to append to a stream in the
event store.
			</div>
			<div class="module-functions">
				
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL.Functor.CommitStream">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL.Functor.CommitStream
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Represents a request to commit writes to a stream in the
event store.
			</div>
			<div class="module-functions">
				
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL.Functor.ReadEvents">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL.Functor.ReadEvents
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Represents a request to read from a stream in the
event store.
			</div>
			<div class="module-functions">
				
			</div>
		</div>
	
		<div class="module-description" id="doc.module.event-store-stream.EventStoreESL.Functor.ReadFromStream">
			<div class="module-name">
				Module: event-store-stream.EventStoreESL.Functor.ReadFromStream
			</div>
			<div class="module-author">
			<b>Written By:</b> Joel Dentici
			</div>
			<div class="module-date">
			<b>Written On:</b> 6/29/2017
			</div>
			<div class="module-desc">
			Represents a request to read from a stream in the
event store.
			</div>
			<div class="module-functions">
				
			</div>
		</div>
	
			</div>

			<div class="top-scroll">
					<a href="#top">&#8593;</a>
			</div>

			<div class="footer">
			This documentation was generated by <code>hmdoc</code> on <code>6/29/2017, 10:09:23 PM</code>
			</div>
		</body>
	</html>
	
